try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="eaf106ae-d328-47e0-a828-81e563843601",e._sentryDebugIdIdentifier="sentry-dbid-eaf106ae-d328-47e0-a828-81e563843601")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9972],{2341:(e,t,n)=>{"use strict";n.d(t,{B:()=>i,N:()=>l});var a=n(54568),r=n(7620);let s=(0,r.createContext)(null),i=()=>{let e=(0,r.useContext)(s);return void 0===e?null:e},l=e=>{let{children:t,settings:n}=e;return(0,a.jsx)(s.Provider,{value:n,children:t})}},3118:(e,t,n)=>{Promise.resolve().then(n.bind(n,38484)),Promise.resolve().then(n.bind(n,34577)),Promise.resolve().then(n.bind(n,61529)),Promise.resolve().then(n.bind(n,87606)),Promise.resolve().then(n.bind(n,24199)),Promise.resolve().then(n.bind(n,99757)),Promise.resolve().then(n.bind(n,63339)),Promise.resolve().then(n.bind(n,16258)),Promise.resolve().then(n.bind(n,4049)),Promise.resolve().then(n.bind(n,84007)),Promise.resolve().then(n.bind(n,67933)),Promise.resolve().then(n.bind(n,3149)),Promise.resolve().then(n.bind(n,82613)),Promise.resolve().then(n.bind(n,38237))},7726:(e,t,n)=>{"use strict";n.d(t,{sk:()=>x,dy:()=>y,Rs:()=>O,Fn:()=>_,CW:()=>E,bT:()=>C,t7:()=>T,Vt:()=>L,uE:()=>w,OZ:()=>R,O2:()=>M,mz:()=>v,FG:()=>N,Bq:()=>j,EV:()=>b,Lo:()=>z,_W:()=>S,yu:()=>k,HA:()=>D,HF:()=>B,Pt:()=>K,HI:()=>I,Du:()=>P,wR:()=>q,aC:()=>Q,gG:()=>A,uC:()=>V,lj:()=>F});var a=n(98518),r=n(77186),s=n(1761),i=n(2341),l=n(53248),o=n(71473),u=n(7620),d=n(75632),c=n(44180),m=n(87606),p=n(92012),f=n.n(p),h=n(62942),g=n(57067);let v=e=>{let t=(0,m.useQueryClient)(),{activeOrganization:n}=(0,s.YL)(),a=null==n?void 0:n.uuid,r=function(e){let t=JSON.stringify(e);return(0,u.useMemo)(()=>e,[t])}([o.fC,{orgUUID:a},{uuid:e}]);return t.getQueryData(r)},x=30,y=1e4,b=e=>{let{limit:t,offset:n,enabled:a=!0,starred:i,searchQuery:l}=e,{activeOrganization:u}=(0,s.YL)(),d=null==u?void 0:u.uuid,c=new URLSearchParams;void 0!==t&&c.append("limit",t.toString()),void 0!==n&&c.append("offset",n.toString()),void 0!==i&&c.append("starred",i.toString()),void 0!==l&&c.append("searchQuery",l);let m=c.toString();return m=m?"?".concat(m):"",(0,r.Sk)("/api/organizations/".concat(null!=d?d:"","/chat_conversations").concat(m),{queryKey:[o.DC,{orgUUID:d},{limit:t,offset:n,starred:i,searchQuery:l}],staleTime:3e5,enabled:!!d&&a})},_=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid;return(0,r.Sk)("/api/organizations/".concat(t,"/chat_conversations/count_all"),{queryKey:[o.Ad,{orgUUID:t}],staleTime:3e5,enabled:!!t})},w=()=>{let{activeOrganization:e}=(0,s.YL)(),t=(0,r.mn)();return(0,u.useCallback)(async n=>{let{limit:a,offset:r}=n,s=new URLSearchParams;void 0!==a&&s.append("limit",a.toString()),void 0!==r&&s.append("offset",r.toString());let i=s.toString();return i=i?"?".concat(i):"",(await t("/api/organizations/".concat(null==e?void 0:e.uuid,"/chat_conversations").concat(i))).json()},[null==e?void 0:e.uuid,t])},j=function(e){let{suppressError:t,enabled:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0},{activeOrganization:a}=(0,s.YL)(),i=null==a?void 0:a.uuid,l=(0,u.useRef)([]),d=(0,m.useQueryClient)(),c="/api/organizations/".concat(null!=i?i:"","/chat_conversations/").concat(e,"?tree=True&rendering_mode=messages&render_all_tools=true"),p=(0,r.Sk)(c,{queryKey:[o.fC,{orgUUID:i},{uuid:e}],staleTime:3e5,enabled:!!i&&!!e&&n,meta:{noToast:t}},t=>(d.invalidateQueries({queryKey:[o.XF,{orgUUID:i,conversationUUID:e}]}),(0,g.H6)(t))),h=(0,u.useMemo)(()=>{if(!p.data)return l.current=[],l.current;let e=(0,g.$)(p.data);if(e.length!==l.current.length||e.some((e,t)=>{var n;return e.uuid!==(null==(n=l.current[t])?void 0:n.uuid)}))return l.current=e,l.current;for(let t=0;t<e.length;t++)f()(e[t],l.current[t])||(l.current[t]=e[t]);return l.current},[p.data]);return{...p,currentPath:h}},S=e=>{let t=(0,m.useQueryClient)(),{activeOrganization:n}=(0,s.YL)(),a=null==n?void 0:n.uuid;return(0,u.useCallback)(()=>{t.invalidateQueries({queryKey:[o.fC,{orgUUID:a},{uuid:e}]})},[t,a,e])},C=(e,t)=>{let{mutateAsync:n}=E(),a=(0,h.useRouter)(),r=t||(0,d.N)();return(0,u.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{model:void 0,controlsOpen:!1},s={uuid:r,name:"",model:t.model};t.createMode&&(s.create_mode=t.createMode),t.projectUuid&&(s.project_uuid=t.projectUuid),n(s).then(()=>{let n="/chat/".concat(r).concat(t.controlsOpen?"?controls=1":"");a[e](n)}).catch(e=>{(0,c.Cp)(e)})},[n,a,e,r])},E=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid,n=(0,m.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(null!=t?t:"","/chat_conversations"),"POST",{enabled:!!t,onSuccess:e=>{let a;n.setQueryData((a=e.uuid,[o.fC,{orgUUID:t},{uuid:a}]),t=>({...t||{},...e,chat_messages:(null==t?void 0:t.chat_messages)||[],messageByUuid:new Map,parentByChildUuid:new Map,childrenByParentUuid:new Map,selectedChildByUuid:new Map}))}})},T=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid,n=(0,m.useQueryClient)();return(0,r.Qv)(e=>{let{uuid:n}=e;return"/api/organizations/".concat(null!=t?t:"","/chat_conversations/").concat(n)},"DELETE",(e,t)=>{let{uuid:n}=e;if(!t)return[];let a=t.findIndex(e=>e.uuid===n);if(!(a>-1))return t;{let e=[...t];return e.splice(a,1),e}},{enabled:!!t,queryKey:[o.DC,{orgUUID:t}],onSuccess:async(e,a)=>{let{uuid:r,projectUuid:s}=a;await n.invalidateQueries({queryKey:[o.fC,{orgUUID:t},{uuid:r}]}),s&&await n.invalidateQueries({queryKey:[o.yF,{orgUuid:t,projectUuid:s}]}),await Y(n,t)}})},L=e=>{let{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid,a=(0,m.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(n,"/chat_conversations/delete_many"),"POST",{onSuccess:async t=>{await Y(a,n),e&&e(t)}})},k=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid;return(0,r.Sk)("/api/organizations/".concat(t,"/shares"),{queryKey:[o._J,{orgUUID:t}],enabled:!!t,staleTime:3e5})},M=e=>{let{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid;return(0,r.Sk)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/latest"),{enabled:!!n&&!!e,queryKey:[o.XF,{orgUUID:n,conversationUUID:e}],staleTime:0,meta:{noToast:!0}},e=>{let{snapshot:t,shareable:n,disabled_reason:a}=e;return{shareable:n,disabled_reason:a,snapshot:t?{...t,chat_messages:t.chat_messages.map(e=>(0,g.XU)(e))}:null}})},N=e=>{let{activeOrganization:t,account:n}=(0,s.YL)(),a=null==t?void 0:t.uuid,i=n&&a?"/api/organizations/".concat(a,"/chat_snapshots/").concat(e,"?rendering_mode=messages&render_all_tools=true"):"/api/chat_snapshots/".concat(e,"?rendering_mode=messages&render_all_tools=true");return(0,r.Sk)(i,{retry:!1,refetchInterval:!1,enabled:!!e,staleTime:0,queryKey:[o.Bn,{orgUUID:a,snapshotUUID:e}]},e=>({...e,chat_messages:e.chat_messages.map(e=>(0,g.XU)(e))}))},P=e=>{let{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid,a=(0,m.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/share"),"POST",{onSuccess:()=>{a.invalidateQueries({queryKey:[o.XF,{orgUUID:n,conversationUUID:e}]}),a.invalidateQueries({queryKey:[o._J,{orgUUID:n}]}),a.invalidateQueries({queryKey:[o.A2,{orgUUID:n}]})}})},A=(e,t)=>{let{activeOrganization:n}=(0,s.YL)(),a=null==n?void 0:n.uuid,i=(0,m.useQueryClient)();return(0,r.L2)("/api/organizations/".concat(a,"/share/").concat(t),"DELETE",{enabled:!!a&&!!t,meta:{errorMessage:"There was an error while trying to unshare the conversation. Please try again."},onSuccess:()=>{i.invalidateQueries({queryKey:[o.XF,{orgUUID:a,conversationUUID:e}]}),i.invalidateQueries({queryKey:[o._J,{orgUUID:a}]}),i.invalidateQueries({queryKey:[o.A2,{orgUUID:a}]})}})},z=e=>{let{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid;return(0,r.Sk)("/api/organizations/".concat(n,"/artifact-versions/").concat(e),{retry:!1,refetchInterval:!1,enabled:!!e&&!!n,staleTime:0,queryKey:[o.Fz,{artifactVersionUUID:e}]})},D=function(e,t,n){var l,u,d;let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{track:p}=(0,a.st)(),f=null!=(u=null==(l=(0,i.B)())?void 0:l.preview_feature_uses_artifacts)&&u,{activeOrganization:h}=(0,s.YL)(),g=null==h?void 0:h.uuid,v=(0,m.useQueryClient)(),x=[o.fC,{orgUUID:g},{uuid:e}];return(0,r.L2)("/api/organizations/".concat(null!=g?g:"","/chat_conversations/").concat(e,"/chat_messages/").concat(null!=(d=t.uuid)?d:"","/chat_feedback"),t.chat_feedback?"PUT":"POST",{enabled:!!g,meta:{errorMessage:"We could not save your feedback. Please try again later."},...c,onSuccess(){for(var a,r,s=arguments.length,i=Array(s),l=0;l<s;l++)i[l]=arguments[l];p({event_key:"claudeai.conversation.feedback.sent",message_uuid:t.uuid,conversation_uuid:e,artifacts_enabled:f,conversationHasArtifacts:n,type:null==(a=t.chat_feedback)?void 0:a.type}),v.invalidateQueries({queryKey:x}),null==(r=c.onSuccess)||r.call(c,...i)}})},U=()=>{let e=(0,m.useQueryClient)(),{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid;return(0,u.useCallback)((t,a)=>{t&&(e.setQueryData([o.fC,{orgUUID:n},{uuid:t}],e=>e&&{...e,...a}),e.setQueriesData({queryKey:[o.DC,{orgUUID:n}]},e=>null==e?void 0:e.map(e=>e.uuid!==t?e:{...e,...a})))},[n,e])},I=e=>{let t=(0,m.useQueryClient)(),{activeOrganization:n}=(0,s.YL)(),a=null==n?void 0:n.uuid,i=U();return(0,r.L2)("/api/organizations/".concat(a,"/chat_conversations/").concat(e),"PUT",{onMutate:n=>{var r;let{name:s}=n,l=t.getQueryData([o.fC,{orgUUID:a},{uuid:e}]);return i(e,{name:s}),{oldTitle:null!=(r=null==l?void 0:l.name)?r:""}},onError(t,n,a){a&&i(e,{name:a.oldTitle})}})},R=e=>{let t=U(),{activeOrganization:n}=(0,s.YL)();return(0,r.L2)("/api/organizations/".concat(null==n?void 0:n.uuid,"/chat_conversations/").concat(e,"/title"),"POST",{onSuccess(n){let{title:a}=n;t(e,{name:null!=a?a:""})},meta:{noToast:!0}})};function O(e){var t,n;let a=(0,l.C)(e),r=e.attachments.map(e=>e.extracted_content).join(" ");return a+" "+r+" "+((null==(t=e.content)?void 0:t.filter(e=>"tool_use"===e.type).map(e=>e.input?JSON.stringify(e.input):e.partial_json||"").join(" "))||"")+" "+((null==(n=e.content)?void 0:n.filter(e=>"tool_result"===e.type).flatMap(e=>e.content.filter(e=>"text"===e.type).map(e=>e.text)).join(" "))||"")}let Q=e=>{let{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid;return(0,r.L2)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/stop_response"),"POST")},K=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid;return(0,r.L2)(e=>{let{conversation_uuid:n}=e;return"/api/organizations/".concat(t,"/chat_conversations/").concat(n,"/tool_result")},"POST",{enabled:!!t,meta:{errorMessage:"We could not record the tool result. Please try again later."},transformVariables:e=>{let{conversation_uuid:t,...n}=e;return n}})},F=e=>{let{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid;return(0,r.L2)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/current_leaf_message_uuid"),"PUT")},B=(e,t)=>{let{activeOrganization:n}=(0,s.YL)(),a=(0,m.useQueryClient)(),i=null==n?void 0:n.uuid;return(0,r.Qv)("/api/organizations/".concat(i,"/chat_conversations/").concat(e,"?rendering_mode=raw"),"PUT",(e,t)=>t?{...t,settings:{...t.settings,...e.settings}}:void 0,{enabled:!!e,onSuccess:()=>{Y(a,i)},onSettled:()=>{(null==t?void 0:t.refetchOnSettled)&&a.refetchQueries({queryKey:[o.fC,{orgUUID:i},{uuid:e}]})},queryKey:[o.fC,{orgUUID:i},{uuid:e}]})},Y=async(e,t)=>{await Promise.all([e.invalidateQueries({queryKey:[o.DC,{orgUUID:t}]}),e.invalidateQueries({queryKey:[o.Ad,{orgUUID:t}]})])},q=e=>{let{activeOrganization:t}=(0,s.YL)(),n=(0,m.useQueryClient)(),a=null==t?void 0:t.uuid;return(0,r.Qv)("/api/organizations/".concat(a,"/chat_conversations/").concat(e,"?rendering_mode=raw"),"PUT",(e,t)=>t?{...t,...e}:void 0,{onSuccess:()=>{Y(n,a)},queryKey:[o.fC,{orgUUID:a},{uuid:e}]})},V=e=>{let{activeOrganization:t}=(0,s.YL)(),n=(0,m.useQueryClient)(),a=null==t?void 0:t.uuid;return(0,r.Qv)("/api/organizations/".concat(a,"/chat_conversations/").concat(e,"?rendering_mode=raw"),"PUT",(e,t)=>{var n;return t?{...t,project_uuid:null!=(n=e.project_uuid)?n:void 0}:void 0},{onSuccess:()=>{Y(n,a),n.invalidateQueries({queryKey:[o.yF]})},queryKey:[o.fC,{orgUUID:a},{uuid:e}]})}},9447:(e,t,n)=>{"use strict";n.d(t,{z:()=>m});var a=n(42977),r=n(54568),s=n(90510),i=n(64786),l=n(90119),o=n(32987),u=n(53600);function d(){let e=(0,a._)(["\n  from-bg-100\n  via-bg-100\n  via-65%\n  to-bg-100/0\n  pointer-events-none\n  absolute\n  inset-0\n  -bottom-5\n  z-[-1]\n  bg-gradient-to-b\n  blur-sm\n"]);return d=function(){return e},e}let c=s.J.div(d());function m(e){let{children:t,className:n,contentClassName:a,sticky:s,fixed:d,mdTitle:m,large:p,narrow:f}=e,{isMobile:h,isExpanded:g}=(0,u.V)(),v=(0,l.V)(i.E_),x=!t&&!m,y=p&&!v;return(0,r.jsxs)("header",{className:(0,o.A)("flex w-full bg-bg-100",s&&"sticky top-0 z-header",d&&"fixed top-0 z-header",v?i.X_:"h-12",v&&[!g&&"pl-[133px]",!x&&i.zo],y&&["mx-auto md:h-24 md:items-end",f?"max-w-4xl":"max-w-7xl"],n),"aria-hidden":x,children:[!v&&(s||d)&&(0,r.jsx)(c,{}),(0,r.jsx)("div",{className:(0,o.A)("flex w-full items-center justify-between gap-4",v?"pt-0.5":"",v&&!g?"pl-3":"pl-11 lg:pl-8",v&&!(h&&g)&&"draggable",a,y?"px-4 md:pl-8":"pr-3"),children:m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{className:(0,o.A)("text-text-200 flex items-center gap-2 text-center max-md:hidden min-w-0",v?"font-medium leading-tight tracking-tight":"font-heading",!v&&(y?"text-2xl":"text-lg")),children:(0,r.jsx)("span",{className:"truncate",children:m})}),(0,r.jsx)("div",{}),t]}):t})]})}},12072:(e,t,n)=>{"use strict";n.d(t,{m:()=>h});var a=n(42977),r=n(54568),s=n(90510),i=n(91961),l=n(7620),o=n(32987),u=n(37463),d=n(67754);function c(){let e=(0,a._)(["\n  px-2\n  py-1\n  text-xs\n  font-normal\n  font-ui\n  leading-tight\n  rounded-md\n  shadow-md\n  text-white\n  bg-black/80\n  backdrop-blur\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return c=function(){return e},e}function m(){let e=(0,a._)(["\n  max-w-[337px]\n  z-tooltip\n  [*:disabled_&]:hidden\n"]);return m=function(){return e},e}function p(){let e=(0,a._)(["\n  p-1\n  font-small-bold\n  rounded-lg\n  shadow-md\n  text-white\n  bg-black/80\n  backdrop-blur\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return p=function(){return e},e}function f(){let e=(0,a._)(["\n  p-1\n  font-base\n  border-border-300\n  border-0.5\n  rounded-lg\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  text-text-100\n  bg-bg-100\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return f=function(){return e},e}function h(e){let{children:t,tooltipContent:n,contentStyle:a="default",side:s="top",sideOffset:u,align:c,className:m,delayDuration:p=200,keyboardShortcut:f,...h}=e,g=x[a],v=function(e){let t=(0,i.vm)();return(0,l.useMemo)(()=>{if(!e)return"";let n=e.toLowerCase().split("+").map(e=>e.trim()),a=[],r=[];n.forEach(e=>{["cmd","command","meta","ctrl","control","alt","option","shift"].includes(e)?a.push(e):r.push(e)});let s=["ctrl","control","alt","option","shift","cmd","command","meta"],i=[...a.sort((e,t)=>s.indexOf(e)-s.indexOf(t)).map(e=>t?({ctrl:"⌃",control:"⌃",alt:"⌥",option:"⌥",shift:"⇧",cmd:"⌘",command:"⌘",meta:"⌘"})[e]:({ctrl:"Ctrl",control:"Ctrl",alt:"Alt",option:"Alt",shift:"⇧",cmd:"Ctrl",command:"Ctrl",meta:"Ctrl"})[e]),...r.map(e=>{if(t){if("space"===e)return"␣";if("enter"===e||"return"===e)return"⏎";if("delete"===e||"backspace"===e)return"⌫";if("escape"===e||"esc"===e)return"Esc";if("tab"===e)return"⇥";if("up"===e)return"↑";if("down"===e)return"↓";if("left"===e)return"←";if("right"===e)return"→"}else{if("space"===e)return"Space";if("enter"===e||"return"===e)return"Enter";if("delete"===e||"backspace"===e)return"Backspace";if("escape"===e||"esc"===e)return"Esc";if("tab"===e)return"Tab";if("up"===e)return"Up";if("down"===e)return"Down";if("left"===e)return"Left";if("right"===e)return"Right"}return e.match(/^f\d+$/)||1===e.length?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)})];return t?i.join(""):i.join("+")},[e,t])}(f||"");return(0,r.jsx)(d.Kq,{delayDuration:p,children:(0,r.jsxs)(d.bL,{...h,children:[(0,r.jsx)(d.l9,{asChild:!0,children:t}),(0,r.jsx)(d.ZL,{children:(0,r.jsx)("span",{children:(0,r.jsxs)(g,{className:(0,o.A)(m,!n&&"hidden"),sideOffset:null!=u?u:5,side:s,align:c,children:[n,f&&(0,r.jsx)("span",{className:"ml-1.5 opacity-70",children:v})]})})})]})})}let g=(0,s.J)(d.UC)(c()),v=(0,s.J)(d.UC)(m()),x={default:g,citation:e=>{let{children:t,...n}=e;return(0,r.jsx)(v,{...n,children:(0,r.jsx)(u.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"p-1 font-base text-text-200 bg-bg-100 break-words border-0.5 border-border-300/25 max-h-[300px] shadow-diffused shadow-[hsl(var(--always-black)/4%)] rounded-lg overflow-y-auto",children:t})})},inputMenu:(0,s.J)(d.UC)(p()),sampleImage:(0,s.J)(d.UC)(f())}},15207:(e,t,n)=>{"use strict";n.d(t,{T:()=>s});var a=n(54568),r=n(32987);function s(e){let{children:t,className:n,narrow:s}=e;return(0,a.jsx)("main",{className:(0,r.A)("mx-auto mt-4 w-full flex-1 px-4 md:pl-8 lg:mt-6",s?"max-w-4xl":"max-w-7xl",n),children:t})}},15351:(e,t,n)=>{"use strict";n.d(t,{C:()=>b});var a=n(54568),r=n(7726),s=n(34259),i=n(98518),l=n(41417),o=n(62798),u=n(12072),d=n(78071),c=n(32987),m=n(37463),p=n(68864),f=n(27261),h=n.n(f),g=n(7620),v=n(46760),x=n(62971),y=n(81527);let b=e=>{let{conversation:t,hideProject:n=!1,isSelected:m,disabled:f,hasBeenShared:y}=e,b=(0,v.A)(),[j,S]=(0,g.useState)(!1),{mutate:C}=(0,r.t7)(),{track:E}=(0,i.st)(),T=(0,g.useMemo)(()=>p.c9.fromISO(t.updated_at),[t.updated_at]);return(0,a.jsxs)("div",{className:(0,c.A)("group relative",f&&"pointer-events-none"),children:[(0,a.jsx)(h(),{href:"/chat/".concat(t.uuid),onClick:()=>{E({event_key:"claudeai.conversation.recent.opened",conversation_uuid:t.uuid})},className:(0,c.A)("\n          border-0.5\n          font-large\n          flex\n          cursor-pointer\n          overflow-x-hidden\n          text-ellipsis\n          whitespace-nowrap\n          rounded-xl\n          bg-gradient-to-b\n          py-4\n          pl-5\n          pr-4\n          transition-all\n          ease-in-out\n          hover:shadow-sm\n          active:scale-[0.98]\n        ",m?"from-accent-secondary-900/10 to-accent-secondary-900/5 border-accent-secondary-100":"from-bg-100 to-bg-100/30 border-border-300 hover:from-bg-000 hover:to-bg-000/80 hover:border-border-200"),children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"truncate",children:t.name||(0,a.jsx)(x.A,{defaultMessage:"Untitled",id:"3kbIhS7KZS"})}),(0,a.jsxs)("div",{className:"flex min-h-5 items-center gap-1.5",children:[(0,a.jsx)("div",{className:"text-text-400 font-small truncate",children:!n&&t.project_uuid?(0,a.jsx)(_,{projectUuid:t.project_uuid,datetime:T,locale:b.locale}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{defaultMessage:"Last message",id:"ls9fov3n6A"}),"\xa0",(0,a.jsx)(o.s,{datetime:T,locale:b.locale})]})}),y&&(0,a.jsx)(w,{})]})]})}),!m&&!f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.T,{isOpen:j,onClose:e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),S(!1)},onConfirm:e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),C({uuid:t.uuid,projectUuid:t.project_uuid}),S(!1)}}),(0,a.jsx)(u.m,{tooltipContent:b.formatMessage({defaultMessage:"Delete chat",id:"ngIzbjIFxF"}),children:(0,a.jsx)(l.$,{className:" z-2 !absolute top-2 right-2 p-2 rounded-lg transition duration-300 opacity-0 translate-x-1 ease-in-out group-hover:translate-x-0 group-hover:opacity-100 ",onClick:e=>{e.preventDefault(),e.stopPropagation(),S(!0)},"aria-label":b.formatMessage({defaultMessage:"Delete conversation",id:"9eR0QpHCt3"}),variant:"ghost",size:"unset",children:(0,a.jsx)(d.l,{size:14})})})]})]})};function _(e){let{projectUuid:t,datetime:n,locale:r}=e,{data:s,isLoading:i}=(0,y.fo)(t);return i||!s||s.is_harmony_project?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{defaultMessage:"Last message",id:"ls9fov3n6A"}),"\xa0",(0,a.jsx)(o.s,{datetime:n,locale:r})]}):(0,a.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1},className:"whitespace-nowrap",children:(0,a.jsx)(x.A,{defaultMessage:"Last message {relativeTime} in {projectName}",id:"im6PDQPyfi",description:"Text showing when the last message in a project was sent",values:{relativeTime:(0,a.jsx)(o.s,{datetime:n,locale:r}),projectName:(0,a.jsx)("span",{className:"font-small-bold",children:s.name})}})})}function w(){return(0,a.jsx)("div",{className:"bg-bg-300 text-text-300 flex h-4 items-center rounded-md translate-y-px px-1 text-[0.625rem] font-medium",children:(0,a.jsx)(x.A,{defaultMessage:"Shared",id:"kWI6zXRaHY"})})}},21869:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});var a=n(54568),r=n(41417);n(7620);var s=n(62971);let i=e=>{let{isLoading:t,numSelected:n,totalNumItems:i,handleSelectAll:l,handleCancel:o,handleDeleteSelected:u}=e;return(0,a.jsxs)(a.Fragment,{children:[n<i&&(0,a.jsx)(r.$,{variant:"underline",className:"text-sm rounded-md text-accent-secondary-000 mr-2 !opacity-100 h-8",size:"unset",onClick:l,children:(0,a.jsx)(s.A,{defaultMessage:"Select all",id:"94Fg25VD0N"})}),(0,a.jsx)(r.$,{size:"sm",variant:"secondary",onClick:o,children:(0,a.jsx)(s.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(r.$,{size:"sm",variant:"danger",disabled:0===n,onClick:u,loading:t,children:(0,a.jsx)(s.A,{defaultMessage:"Delete <hidden>{space}Selected</hidden>",id:"QE60Po3yK8",values:{space:(0,a.jsx)(a.Fragment,{children:"\xa0"}),hidden:e=>(0,a.jsxs)("span",{className:"max-sm:hidden",children:[" ",e]})}})})]})}},34259:(e,t,n)=>{"use strict";n.d(t,{T:()=>c});var a=n(54568),r=n(41417),s=n(37076),i=n(32987),l=n(7620);let o=l.forwardRef((e,t)=>{let{value:n,className:r}=e,s=Math.round(100*Math.min(Math.max(n,0),1));return(0,a.jsx)("div",{ref:t,role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,className:(0,i.A)("w-full h-1 bg-bg-400 rounded-full overflow-hidden",r),children:(0,a.jsx)("div",{className:"h-full bg-accent-main-100 rounded-full transition-all duration-300 ease-in-out",style:{width:"".concat(s,"%")}})})});o.displayName="Progress";var u=n(11134),d=n(62971);let c=e=>{let{isOpen:t=!1,onClose:n,onConfirm:i,modalTitle:c=(0,a.jsx)(d.A,{defaultMessage:"Delete chat?",id:"M16o5rLckO"}),modalText:m=(0,a.jsx)(d.A,{defaultMessage:"Are you sure you want to delete this chat?",id:"eoF+zSJr4t"}),isDeleting:p=!1,progress:f=0}=e,h=(0,l.useCallback)(e=>{"Enter"!==e.key||p||i()},[i,p]);return(0,l.useEffect)(()=>(t&&window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}),[t,h]),(0,a.jsxs)(s.aF,{title:c,isOpen:t,onClose:n,children:[(0,a.jsx)("div",{className:"mt-1 mb-2",children:m}),p&&f>0&&(0,a.jsx)(o,{value:f}),(0,a.jsxs)(s.vW,{children:[(0,a.jsx)(r.$,{variant:"danger","data-testid":"delete-modal-confirm",onClick:i,disabled:p,children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.P,{className:"inline-block mr-1 animate-spin",size:14}),(0,a.jsx)(d.A,{defaultMessage:"Deleting...",id:"noZdV2GAKj"})]}):(0,a.jsx)(d.A,{defaultMessage:"Delete",id:"K3r6DQW7h+"})}),(0,a.jsx)(r.$,{variant:"secondary",onClick:n,children:(0,a.jsx)(d.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})}},37076:(e,t,n)=>{"use strict";n.d(t,{I_:()=>v,aF:()=>g,s_:()=>h,vW:()=>p,yl:()=>f});var a=n(42977),r=n(54568),s=n(90510),i=n(28885),l=n(32987),o=n(25173),u=n(7620),d=n(41417);function c(){let e=(0,a._)(['\n  fixed\n  z-modal\n  inset-0\n  grid\n  items-center\n  justify-items-center\n  bg-black\n  bg-opacity-50\n  backdrop-brightness-75\n  overflow-y-auto\n  md:p-10\n  p-4\n  data-[state="open"]:animate-[fade_250ms_ease-in_forwards]\n  data-[state="closed"]:animate-[fade_125ms_ease-out_reverse_forwards]\n']);return c=function(){return e},e}function m(){let e=(0,a._)(['\n  flex\n  flex-col\n  focus:outline-none\n  relative\n  text-text-100\n  text-left\n  shadow-xl\n  border-0.5\n  border-border-300\n  rounded-2xl\n  md:p-6\n  p-4\n  align-middle\n  data-[state="open"]:animate-[zoom_250ms_ease-in_forwards]\n  data-[state="closed"]:animate-[zoom_125ms_ease-out_reverse_forwards]\n']);return m=function(){return e},e}function p(e){let{children:t,layout:n="right",className:a}=e;return(0,r.jsx)("div",{className:(0,l.A)("mt-4 flex flex-col gap-2","left"===n&&"sm:flex-row","center"===n&&"justify-center sm:flex-row","right"===n&&"sm:flex-row justify-end","between"===n&&"justify-between sm:flex-row",a),children:t})}function f(e){let{...t}=e;return(0,r.jsx)(d.$,{...t})}function h(e){let{onClose:t}=e;return(0,r.jsx)(d.$,{size:"icon_sm",variant:"ghost",className:"!text-text-500 hover:!text-text-400 -mx-2 !rounded-xl",onClick:()=>t(),children:(0,r.jsx)(i.X,{size:16})})}function g(e){return(0,r.jsx)(x,{...e})}function v(e){return(0,r.jsx)(x,{unstyled:!0,...e})}function x(e){let{title:t,subtitle:n,isOpen:a,className:s,children:i,onClose:d,icon:c,modalSize:m="md",backgroundColor:p,autoCloseOnFocusOut:f=!0,closeOnEscapeKeydown:g=!0,fullWidth:v=!0,fullHeight:x,hasCloseButton:_=!1,prependBeforeCloseButton:w,overlayChildren:j,overlayClassName:S,autoFocusOnOpen:C=!0,returnFocusOnClose:E=!0,unstyled:T=!1}=e,[L,k]=(0,u.useState)(!1),M=(0,u.useRef)(null),N=(0,u.useRef)(null);(0,u.useEffect)(()=>{k(!0)},[]),(0,u.useEffect)(()=>{a&&E&&(M.current=document.activeElement)},[a,E]),(0,u.useEffect)(()=>{if(!a&&E&&M.current){let e=M.current,t=null!==e.getAttribute("data-radix-dropdown-menu-trigger")||null!==e.closest("[data-radix-dropdown-menu-trigger]"),n=document.contains(e)&&null!==e.offsetParent&&"hidden"!==getComputedStyle(e).visibility,a=setTimeout(()=>{if(!t&&n){var e;null==(e=M.current)||e.focus()}M.current=null},50);return()=>clearTimeout(a)}},[a,E]);let P=e=>{f||e.preventDefault()},A=e=>{e.stopPropagation(),g||e.preventDefault()},[z,D]=(0,u.useState)(!1);return((0,u.useEffect)(()=>{if(a)D(!0);else{let e=window.setTimeout(()=>{D(!1)},125);return setTimeout(()=>{document.body.style.pointerEvents="auto"},300),()=>{window.clearTimeout(e)}}},[a]),L)?(0,r.jsx)(o.bL,{open:a,onOpenChange:e=>{e||d()},children:z&&(0,r.jsx)(o.ZL,{forceMount:!0,children:(0,r.jsxs)(y,{forceMount:!0,className:S,children:[T?(0,r.jsx)(o.UC,{forceMount:!0,ref:N,onOpenAutoFocus:e=>{C||e.preventDefault()},onInteractOutside:P,onEscapeKeyDown:A,className:s,children:i}):(0,r.jsx)(b,{forceMount:!0,ref:N,onOpenAutoFocus:e=>{C||e.preventDefault()},onInteractOutside:P,onEscapeKeyDown:A,className:(0,l.A)("min-w-0",s,v&&"w-full",x&&"h-full","sm"===m&&"max-w-sm","md"===m&&"max-w-md","lg"===m&&"max-w-lg","2lg"===m&&"max-w-xl","xl"===m&&"max-w-3xl","3xl"===m&&"max-w-6xl",null!=p?p:"bg-bg-100"),children:(0,r.jsxs)("div",{className:(0,l.A)("min-h-full",!!(t||w||_||n)&&"flex flex-col",x&&"w-full h-full"),children:[!!(t||w||_)&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:(0,l.A)("flex items-center gap-4",t?"justify-between":"justify-end"),children:[t&&(0,r.jsxs)(o.hE,{className:"font-xl-bold text-text-100 flex w-full min-w-0 items-center leading-6 break-words",children:[c&&(0,r.jsx)("span",{className:"mr-2",children:c}),(0,r.jsx)("span",{className:"[overflow-wrap:anywhere]",children:t})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[w,_&&(0,r.jsx)(h,{onClose:d})]})]})}),n&&(0,r.jsx)("p",{className:"text-text-300 mb-2 text-sm",children:n}),i]})}),j]})})}):null}let y=(0,s.J)(o.hJ)(c()),b=(0,s.J)(o.UC)(m())},38484:(e,t,n)=>{"use strict";n.d(t,{RecentsPageClient:()=>P});var a=n(54568),r=n(24871),s=n(62971),i=n(41417),l=n(12072),o=n(64786),u=n(90119),d=n(46760);function c(e){let{children:t,disabledReason:n,...r}=e,s=(0,u.V)(o.E_),c=(0,d.A)(),m={defaultMessage:t.props.defaultMessage,id:t.props.id};if(!s)return(0,a.jsx)(l.m,{tooltipContent:n,side:"bottom",children:(0,a.jsx)("div",{children:(0,a.jsx)(i.$,{...r,children:t})})});let p=c.formatMessage(m);return(0,a.jsx)(l.m,{tooltipContent:null!=n?n:p,side:"bottom",children:(0,a.jsx)("div",{children:(0,a.jsx)(i.$,{...r,size:"icon_sm"})})})}var m=n(15207),p=n(9447),f=n(7726),h=n(34259),g=n(51121),v=n(87025),x=n(32987),y=n(62942),b=n(7620),_=n(15351),w=n(50498),j=n(41439),S=n(63285);function C(e){let{itemName:t,isInSelectionMode:n,isSelected:r,handleSelect:s,checkboxOffset:i,children:o,hiddenAndDisabled:u=!1}=e;return(0,a.jsxs)("div",{className:"relative group/row",children:[u?null:(0,a.jsx)("div",{className:(0,x.A)("p-1 absolute z-10 top-1/2 -translate-y-1/2 -translate-x-1/2 transition duration-100 ",i,!n&&" opacity-0 scale-75 group-has-[:focus-visible]/row:opacity-100 group-has-[:focus-visible]/row:scale-100 group-hover/row:opacity-100 group-hover/row:scale-100"),children:(0,a.jsx)(l.m,{tooltipContent:r?"Deselect ".concat(t):"Select ".concat(t),className:"pointer-events-none",children:(0,a.jsx)("div",{children:(0,a.jsx)(S.S,{disabled:u,checked:r,onChange:s,label:"Select ".concat(t),hideLabel:!0})})})}),o]})}var E=n(21869),T=n(74189),L=n(1385);function k(){return(0,a.jsx)("div",{className:"flex flex-col gap-3",children:(0,a.jsx)(L.c,{repeat:12,children:(0,a.jsxs)("div",{className:"border-0.5 border-border-300 rounded-xl py-4 px-4 flex flex-col gap-2",children:[(0,a.jsx)(L.j,{height:18,width:{min:200,max:500},rounded:"xl",variant:"light"}),(0,a.jsx)(L.j,{height:18,width:200,rounded:"xl",variant:"light"})]})})})}let M=()=>{var e;let t=(0,d.A)(),n=(0,y.useRouter)(),r=(0,y.useSearchParams)().get("search"),l=null!==r&&""!==r,[o,u]=(0,b.useState)([]),[c,m]=(0,b.useState)(0),[p,_]=(0,b.useState)(!1),S=(0,b.useRef)(null);(0,b.useEffect)(()=>{u([]),m(0),_(!1),S.current&&(S.current.scrollTop=0)},[r]);let{data:C=[],isLoading:L}=(0,f.EV)({limit:l?f.dy:30,offset:l?0:c,searchQuery:l?r:void 0});(0,b.useEffect)(()=>{C.length>0&&(l||0===c?u(C):u(e=>[...e,...C]))},[C,c,l]),(0,b.useEffect)(()=>{!L&&p&&_(!1)},[L,p]);let{data:M}=(0,f.Fn)(),[P,A]=(0,b.useState)(!1),[z,D]=(0,b.useState)(0),[U,I]=(0,b.useState)(!1),{mutate:R}=(0,f.Vt)(),{addError:O}=(0,g.Y)(),Q=async e=>{let n=Math.ceil(e.length/20);I(!0);let a=0;for(let t=0;t<n;t++){let r=20*t,s=e.slice(r,r+20);R({conversation_uuids:s}),D((t+1)/n),a+=s.length,await new Promise(e=>setTimeout(e,500))}a!==e.length&&O(t.formatMessage({defaultMessage:"We weren’t able to delete all conversations. Please try again.",id:"hfpD6PdmmB"})),I(!1),D(0)},{data:K}=(0,f.yu)(),F=(0,b.useMemo)(()=>new Set((null==K?void 0:K.map(e=>e.conversation_uuid))||[]),[K]),B=(0,b.useMemo)(()=>(null!=o?o:[]).map(e=>({uuid:e.uuid,type:"conversation"})),[o]),{selectedItems:Y,handleSelect:q,selectAllItems:V,isInSelectionMode:X,toggleSelectMode:H}=(0,w.m)(B),J=!l&&void 0!==M&&M.count>o.length,W=L&&0===o.length;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.m,{placeholder:t.formatMessage({defaultMessage:"Search your chats...",id:"CWqRudIKOZ"})}),!W&&void 0!==M&&(0,a.jsxs)("div",{className:(0,x.A)("flex items-center mt-2 mb-1 gap-2 top-0 z-header h-12 -mx-4 px-4",X&&"sticky"),children:[X?(0,a.jsxs)("div",{className:"text-accent-secondary-000 flex items-center gap-1.5 flex-1",children:[(0,a.jsx)(v.s,{size:20}),(0,a.jsx)("div",{className:"max-sm:font-base",children:(0,a.jsx)(s.A,{defaultMessage:"<format>{count}</format> selected <format2>{count, plural, one {chat} other {chats}}</format2>",id:"eplvCYS5F6",values:{format:e=>(0,a.jsx)("span",{className:"tabular-nums",children:e}),format2:e=>(0,a.jsx)("span",{className:"max-sm:hidden",children:e}),count:Y.length}})})]}):(0,a.jsxs)("div",{className:"text-text-300 font-base",children:[l?(0,a.jsx)(s.A,{defaultMessage:"{count, plural, one {There is # chat} other {There are # chats}} matching “{search}”",id:"2b11u2HVCF",values:{count:o.length,search:r}}):(0,a.jsx)(s.A,{defaultMessage:"You have {count} previous {count, plural, one {chat} other {chats}} with Claude",id:"yR3XIEsip/",values:{count:null!=(e=M.count)?e:" "}}),(0,a.jsx)(i.$,{variant:"underline",className:"font-base text-accent-secondary-000 mr-2 !opacity-100 ml-1.5",size:"unset",onClick:()=>H(!0),children:(0,a.jsx)(s.A,{defaultMessage:"Select",id:"kQAf2d9u+x"})})]}),X&&o&&(0,a.jsx)(E.g,{isLoading:U,numSelected:Y.length,totalNumItems:o.length,handleSelectAll:V,handleCancel:()=>H(!1),handleDeleteSelected:()=>A(!0)})]}),!L&&(null==o?void 0:o.length)===0&&!l&&(0,a.jsx)("div",{className:"mt-10",children:(0,a.jsx)(j.p,{headline:(0,a.jsx)(s.A,{defaultMessage:"Ready for your first chat?",id:"itY1RkbkQZ"}),description:(0,a.jsx)(s.A,{defaultMessage:"Talk to Claude about anything—it’s literally always up for a yap. Chats will show up here.",id:"LprUCGgqBI"}),variant:"chats",ctaLabel:(0,a.jsx)(s.A,{defaultMessage:"New chat",id:"ATDyLPIoxz"}),onCtaClick:()=>null==n?void 0:n.push("/new")})}),W?(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(k,{})}):(0,a.jsx)("div",{ref:S,className:(0,x.A)("h-[calc(100vh-224px)] min-h-[300px] overflow-auto px-2 -mx-2 pb-20",0===o.length&&"hidden"),children:(0,a.jsxs)("ul",{className:(0,x.A)("flex flex-col gap-3",X&&"max-sm:ml-1 transition-all"),children:[o.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(N,{conversation:e,isSelected:Y.findIndex(t=>{let{uuid:n}=t;return n===e.uuid})>-1,onConversationSelected:(t,n)=>q({uuid:e.uuid,type:"conversation"},t,n),isInSelectionMode:X,hasBeenShared:F.has(e.uuid)})},e.uuid)),p&&(0,a.jsx)(k,{}),J&&(0,a.jsx)("div",{className:"flex justify-center w-full",children:(0,a.jsx)(i.$,{variant:"secondary",className:"w-full",onClick:()=>{m(e=>e+30),_(!0)},disabled:p,children:(0,a.jsx)(s.A,{defaultMessage:"Show more",id:"aWpBzjCXKS"})})})]})}),(0,a.jsx)(h.T,{isOpen:P,isDeleting:U,modalTitle:t.formatMessage({defaultMessage:"Delete {count, plural, one {# chat} other {# chats}}?",id:"u4UvexeGcg"},{count:Y.length}),modalText:t.formatMessage({defaultMessage:"Are you sure you want to permanently delete {count, plural, one {this chat} other {these chats}}? This cannot be undone.",id:"oUQNLoQUff"},{count:Y.length}),progress:z,onClose:e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),A(!1)},onConfirm:async e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),await Q(Y.map(e=>{let{uuid:t}=e;return t})),A(!1),H(!1)}})]})},N=e=>{let{conversation:t,isSelected:n,onConversationSelected:r,isInSelectionMode:s,hasBeenShared:i}=e;return(0,a.jsx)(C,{itemName:"chat",isSelected:n,isInSelectionMode:s,handleSelect:(e,t)=>r(e,t),checkboxOffset:"l-0",children:(0,a.jsx)("div",{className:(0,x.A)("rounded-xl select-none border-0.5 border-transparent",s&&"hover:border-accent-secondary-100 hover:bg-accent-secondary-900/10"),onClick:e=>{s&&r(!n,e.shiftKey)},children:(0,a.jsx)(_.C,{isSelected:n,disabled:s,conversation:t,hasBeenShared:i})})})};function P(){return(0,a.jsxs)("div",{className:"max-h-screen overflow-y-hidden",children:[(0,a.jsxs)(p.z,{narrow:!0,large:!0,mdTitle:(0,a.jsx)(s.A,{defaultMessage:"Your chat history",id:"lkPn+Jl3Nw"}),children:[(0,a.jsx)("div",{}),(0,a.jsx)(c,{href:"/new",variant:"primary",prepend:(0,a.jsx)(r.F,{weight:"bold",size:16}),children:(0,a.jsx)(s.A,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]}),(0,a.jsxs)(m.T,{narrow:!0,children:[(0,a.jsx)("h1",{className:"font-heading text-text-200 mb-4 flex items-center gap-1.5 text-center md:hidden",children:(0,a.jsx)(s.A,{defaultMessage:"Your chat history",id:"lkPn+Jl3Nw"})}),(0,a.jsx)(M,{})]})]})}},41417:(e,t,n)=>{"use strict";n.d(t,{$:()=>m});var a=n(54568),r=n(18179),s=n(615),i=n(32987),l=n(27261),o=n.n(l),u=n(7620);let d="\n    text-text-000\n    font-base-bold\n    border-0.5\n    border-border-200\n    relative\n    overflow-hidden\n    transition\n    duration-100\n    hover:border-border-300/0\n    bg-bg-300/0\n    hover:bg-bg-400\n    backface-hidden",c=(0,s.F)("inline-flex\n  items-center\n  justify-center\n  relative\n  shrink-0\n  can-focus\n  select-none\n  disabled:pointer-events-none\n  disabled:opacity-50\n  disabled:shadow-none\n  disabled:drop-shadow-none",{variants:{variant:{primary:"bg-text-000\n        text-bg-000\n        font-base-bold\n        relative\n        overflow-hidden\n        transition-transform\n        will-change-transform\n        ease-[cubic-bezier(0.165,0.85,0.45,1)]\n        duration-150\n        hover:scale-y-[1.015]\n        hover:scale-x-[1.005]\n        backface-hidden\n        after:absolute\n        after:inset-0\n        after:bg-[radial-gradient(at_bottom,hsla(var(--bg-000)/20%),hsla(var(--bg-000)/0%))]\n        after:opacity-0\n        after:transition\n        after:duration-200\n        after:translate-y-2\n        hover:after:opacity-100\n        hover:after:translate-y-0",flat:"bg-accent-main-000\n          text-oncolor-100\n          font-base-bold\n          transition-colors\n          hover:bg-accent-main-200",secondary:d,outline:d,ghost:"text-text-300\n          border-transparent\n          transition\n          font-ui\n          tracking-tight\n          duration-300\n          ease-[cubic-bezier(0.165,0.85,0.45,1)]\n          hover:bg-bg-300\n          aria-checked:bg-bg-400\n          aria-expanded:bg-bg-400\n          hover:text-text-100\n          aria-pressed:text-text-100\n          aria-checked:text-text-100\n          aria-expanded:text-text-100",underline:"opacity-80\n          transition-all\n          active:scale-[0.985]\n          hover:opacity-100\n          hover:underline\n          underline-offset-3",danger:"bg-danger-200\n          text-oncolor-100\n          font-base-bold\n          transition\n          hover:scale-y-[1.015]\n          hover:scale-x-[1.005]\n          hover:opacity-95",unstyled:""},size:{default:"h-9 px-4 py-2 rounded-lg min-w-[5rem] active:scale-[0.985] whitespace-nowrap",sm:"h-8 rounded-md px-3 min-w-[4rem] active:scale-[0.985] whitespace-nowrap !text-xs",lg:"h-11 rounded-[0.6rem] px-5 min-w-[6rem] active:scale-[0.985] whitespace-nowrap !text-base",icon:"h-9 w-9 rounded-md active:scale-95 shrink-0",icon_xs:"h-6 w-6 rounded-md active:scale-95",icon_sm:"h-8 w-8 rounded-md active:scale-95",icon_lg:"h-11 w-11 rounded-[0.6rem] active:scale-95",inline:"px-0.5 rounded-[0.25rem]",unset:""},option:{rounded:"!rounded-full",prepend:"",append:""},state:{active:""}},compoundVariants:[{size:"default",option:"prepend",class:"pl-2 pr-3 gap-1"},{size:"lg",option:"prepend",class:"pl-2.5 pr-3.5 gap-1"},{size:"sm",option:"prepend",class:" pl-2 pr-2.5 gap-1"},{size:"default",option:"append",class:"pl-3 pr-2 gap-1"},{size:"lg",option:"append",class:"pl-3.5 pr-2.5 gap-1"},{size:"sm",option:"append",class:"pl-2.5 pr-2 gap-1"},{variant:"ghost",state:"active",class:"!bg-bg-400"}],defaultVariants:{variant:"primary",size:"default"}}),m=(0,u.forwardRef)((e,t)=>{let{className:n,variant:s,size:l,option:u,loading:d,href:m,onLinkClick:p,target:f,prepend:h,append:g,state:v,disabled:x,children:y,type:b="button",..._}=e;h&&(u="prepend"),g&&(u="append");let w=(0,i.A)(c({variant:s,size:l,option:u,state:v,className:n}),d&&"text-transparent ![text-shadow:_none]"),j=(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsx)("div",{className:(0,i.A)("absolute inset-0 flex items-center justify-center",s&&"flat"!==s&&"danger"!==s?"secondary"===s?"text-text-400":"text-bg-300":"text-bg-000"),children:(0,a.jsx)(r.Loading,{size:"sm",inheritColor:!0,delay:0})}),h,y,g]});return m?(0,a.jsx)(o(),{href:m,target:f||"_self",className:w,"aria-label":_["aria-label"],onClick:p,children:j}):(0,a.jsx)("button",{className:w,ref:t,disabled:x||d,type:b,..._,children:j})});m.displayName="Button"},50498:(e,t,n)=>{"use strict";n.d(t,{m:()=>r});var a=n(7620);let r=(e,t)=>{let[n,r]=(0,a.useState)(!1),[s,i]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let t=s.filter(t=>e.some(e=>e.uuid===t.uuid&&e.type===t.type));t.length!==s.length&&i(t)},[e]),(0,a.useEffect)(()=>{r(s.length>0)},[s]),{selectedItems:s,handleSelect:(n,a,r)=>{t||(a?((n,a)=>{t||i(t=>{if(!a||0===Object.keys(t).length)return[...t,n];let r=t[Object.keys(t).length-1],s=e.findIndex(e=>{let{uuid:t,type:n}=e;return t===r.uuid&&n===r.type});if(-1===s)return[...t,n];let i=e.findIndex(e=>{let{uuid:t}=e;return t===n.uuid}),l=Math.min(s+1,i),o=Math.max(s-1,i),u=e.slice(l,o+1),d=t.map(e=>{let{uuid:t}=e;return t});return[...t,...u.filter(e=>{let{uuid:t}=e;return -1===d.indexOf(t)})]})})(n,r):(e=>{t||i(t=>t.filter(t=>{let{uuid:n,type:a}=t;return n!==e.uuid||a!==e.type}))})(n))},selectAllItems:()=>{t||i(e)},isInSelectionMode:!t&&n,toggleSelectMode:e=>{r(e),e||i([])}}}},51121:(e,t,n)=>{"use strict";n.d(t,{ErrorsProvider:()=>x,Y:()=>y,i:()=>w});var a=n(54568),r=n(63246),s=n(27062),i=n(90819),l=n.n(i),o=n(58648),u=n.n(o),d=n(26836),c=n.n(d),m=n(62942),p=n(7620),f=n(75006),h=n(1761),g=n(46127);let v=(0,p.createContext)(void 0);function x(e){let{children:t}=e,n=(0,p.useRef)(1),[r,s]=(0,p.useState)([]),i=(0,p.useCallback)(e=>{s(t=>t.filter(t=>t.id!==e))},[]),l=(0,p.useCallback)((e,t)=>{let a=n.current++;return s(t=>[...t,{id:a,message:e instanceof Error?e.message:e,toastType:"error"}]),t&&setTimeout(()=>i(a),t),a},[i]),o=(0,p.useCallback)((e,t)=>{let a=n.current++;return s(t=>[...t,{id:a,message:e,toastType:"success"}]),t&&setTimeout(()=>i(a),t),a},[i]),u=(0,p.useMemo)(()=>({toasts:r,addError:l,addSuccess:o,clearToast:i}),[r,l,o,i]);return(0,a.jsx)(v.Provider,{value:u,children:t})}function y(){let e=(0,p.useContext)(v);if(!e)throw Error("Must be called within ErrorsProvider");return e}let b=f.z.object({id:f.z.string().optional().nullable(),title:f.z.string().optional().nullable(),message:f.z.string().optional().nullable(),displayFrequencyHours:f.z.number().optional().nullable()}),_={};function w(){var e;let{id:t,title:n,message:a,displayFrequencyHours:i}=(0,s.iW)("claude_system_message",_,b),{account:o}=(0,h.YL)(),d=null!=(e=null==o?void 0:o.uuid)?e:"logged-out",f=(0,m.usePathname)(),[v,x]=(0,g.Vc)("dismissed-system-messages",{}),y=(0,p.useMemo)(()=>()=>x(e=>{let n=l()(e);return t&&c()(n,[d,t],Date.now()),n}),[x,d,t]);return(0,p.useMemo)(()=>{if(!o||(0,r.Xs)(o,!0)||"/download"===f||!t)return!1;let e=u()(v,[d,t]);return!e||"boolean"==typeof e||!!i&&Date.now()-e>=60*i*6e4},[o,t,d,v,i,f])?{currentSystemMessageId:t,currentSystemMessageTitle:n,currentSystemMessageContent:a,dismissCurrentSystemMessage:y}:{currentSystemMessageId:null,currentSystemMessageTitle:null,currentSystemMessageContent:null,dismissCurrentSystemMessage:()=>null}}},53248:(e,t,n)=>{"use strict";n.d(t,{C:()=>a});let a=e=>{let t="";if(e.content)for(let n of e.content)"text"===n.type&&(t+=n.text);return t}},53600:(e,t,n)=>{"use strict";n.d(t,{R:()=>m,V:()=>c});var a=n(54568),r=n(89674),s=n(91961),i=n(46612),l=n(72638),o=n(89598),u=n(7620);let d=(0,u.createContext)({isExpanded:!1,setIsExpanded:()=>void 0,closeSidebarOnMobile:()=>void 0,isMobile:!1,setForceMobileLayout:()=>void 0});function c(){return(0,u.useContext)(d)}function m(e){let{children:t}=e,[n,c]=(0,r.j)(i.eT.SIDEBAR_PINNED,!1),[m,p]=(0,r.j)(i.eT.SIDEBAR_VISIBLE_ON_LOAD,!1),{width:f}=(0,l.l)(),[h,g]=u.useState(!1),v=h||(0===f?!m:f<1024),[x,y]=u.useState(m&&n);(0,o.M)("keydown",e=>{var t,n,a;let r=(0,s.cX)()?e.metaKey:e.ctrlKey;if((null==(t=e.key)?void 0:t.toLowerCase())==="."&&r&&(e.preventDefault(),y(e=>!e)),(null==(n=e.key)?void 0:n.toLowerCase())==="/"&&r&&(e.preventDefault(),y(e=>!e)),(null==(a=e.key)?void 0:a.toLowerCase())==="u"&&r){let t=document.getElementById("chat-input-file-upload-onpage")||document.getElementById("chat-input-file-upload-modal")||document.getElementById("chat-input-file-upload-bottom");t instanceof HTMLInputElement&&(e.preventDefault(),t.click())}});let b=(0,u.useMemo)(()=>({isExpanded:x,setIsExpanded:e=>{y(e),v||c(e)},closeSidebarOnMobile:()=>{v&&x&&y(!1)},isMobile:v,setForceMobileLayout:g}),[x,y,v,c,g]);return(0,u.useEffect)(()=>{v?(p(!1),y(!1)):(p(!0),y(n))},[v,p,y,n]),(0,a.jsx)(d.Provider,{value:b,children:t})}},55554:(e,t,n)=>{"use strict";n.d(t,{TierSelectorProvider:()=>c,t:()=>d});var a=n(54568),r=n(46612),s=n(27062),i=n(85544),l=n(7620),o=n(96712);let u=(0,l.createContext)(null),d=()=>{let e=(0,l.useContext)(u);if(!e)throw Error("useTierSelector must be used within a TierSelectorProvider");return e},c=e=>{var t;let{children:n,initialEnabled:d=!1}=e,c=(0,o.l)(),[m,p]=(0,l.useState)(()=>c.get(r.eT.SELECTED_TIER)||null),[f,h]=(0,l.useState)(()=>"true"===c.get(r.eT.SHOULD_OVERRIDE_TOKEN_LIMITS)),[g,v]=(0,l.useState)(()=>"true"===c.get(r.eT.SHOULD_OVERRIDE_FEATURE_ACCESS)),x=null!=(t=(0,s.fS)("internal_tier_selector").value)?t:d,y=(0,l.useState)(x)[1],b=(0,l.useCallback)(()=>{let e=[i.d7.FREE,i.d7.PRO,i.d7.ENTERPRISE,i.d7.MAX],t=Math.floor(Math.random()*e.length);return e[t]},[]),_=(0,l.useCallback)(e=>{if(!x)return void p(e);if(null===e){let e=m||b();c.set(r.eT.SELECTED_TIER,e,{maxAgeSeconds:2592e3})}else c.set(r.eT.SELECTED_TIER,e);p(e)},[m,p,c,b,x]);(0,l.useEffect)(()=>{x?m&&c.set(r.eT.SELECTED_TIER,m):c.delete(r.eT.SELECTED_TIER)},[x,m,c]);let w=(0,l.useCallback)(e=>{if(!x)return void h(e);e?c.set(r.eT.SHOULD_OVERRIDE_TOKEN_LIMITS,"true"):c.delete(r.eT.SHOULD_OVERRIDE_TOKEN_LIMITS),h(e)},[x,c]),j=(0,l.useCallback)(e=>{if(!x)return void v(e);e?c.set(r.eT.SHOULD_OVERRIDE_FEATURE_ACCESS,"true"):c.delete(r.eT.SHOULD_OVERRIDE_FEATURE_ACCESS),v(e)},[x,c]);return(0,l.useEffect)(()=>{x||(c.delete(r.eT.SHOULD_OVERRIDE_TOKEN_LIMITS),c.delete(r.eT.SHOULD_OVERRIDE_FEATURE_ACCESS))},[x,c]),(0,a.jsx)(u.Provider,{value:{selectedTier:m,isTierSelectorEnabled:x,setSelectedTier:_,setIsTierSelectorEnabled:y,shouldOverrideTokenLimits:f,setShouldOverrideTokenLimits:w,shouldOverrideFeatureAccess:g,setShouldOverrideFeatureAccess:j},children:n})}},57067:(e,t,n)=>{"use strict";n.d(t,{$:()=>g,AP:()=>c,GN:()=>u,Gp:()=>d,H6:()=>p,Rh:()=>l,XU:()=>m,ZQ:()=>f,gF:()=>o,gX:()=>v,gv:()=>i,xQ:()=>h});var a=n(44180),r=n(6363),s=n.n(r);let i="new-assistant-message-uuid",l="new-human-message-uuid",o="00000000-0000-4000-8000-000000000000",u=e=>e!==i;function d(e,t){let n=e.get(t);if(void 0===n){let e=Error("Key not found: ".concat(t));throw(0,a.Cp)(e),e}return n}let c=(e,t)=>{let n=null!=t?t:e.current_leaf_message_uuid;if(!n)return e;for(;n!==o;){var a;let t=d(e.parentByChildUuid,n),r=null==(a=d(e.childrenByParentUuid,t))?void 0:a.indexOf(n);e.selectedChildByUuid.set(t,r),n=t}return{...e,current_leaf_message_uuid:t}},m=e=>e.content?e:{...e,content:[{type:"text",text:e.text||"",citations:[]}]},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Set;for(let t of e.chat_messages)"assistant"===t.sender&&t.parent_message_uuid&&n.add(t.parent_message_uuid);let a=e.chat_messages.filter(e=>"assistant"===e.sender||n.has(e.uuid)||void 0===e.parent_message_uuid||t),r={...e,chat_messages:a},s={...r,...(e=>{var t,n,a;let r=new Map,s=new Map,i=new Map,l=new Map,u=new Map;if(0===e.chat_messages.length)return{messageByUuid:s,parentByChildUuid:i,childrenByParentUuid:l,selectedChildByUuid:u};let d=e.chat_messages.map(m);for(let e of d)r.set(e.index,e),s.set(e.uuid,e);for(let e of d){let t=e.parent_message_uuid;if(!t){let a=e.index-1;for(;!t&&a>=0;)t=null==(n=r.get(a))?void 0:n.uuid,a--}t=null!=t?t:o,i.set(e.uuid,t),l.set(t,(null!=(a=l.get(t))?a:[]).concat(e.uuid)),u.set(t,0)}if(!(null==(t=l.get(o))?void 0:t[0]))throw Error("No root message found");return{chat_messages:d,messageByUuid:s,parentByChildUuid:i,childrenByParentUuid:l,selectedChildByUuid:u}})(r)};return s.current_leaf_message_uuid||c(s),c(s,r.current_leaf_message_uuid)},f=e=>{let t=Array.from(e.messageByUuid.values()).map(e=>e.index);return 0===t.length?-1:Math.max(...t)},h=(e,t)=>{for(let a of(e.chat_messages=e.chat_messages.concat(t),t)){var n;if(!a.parent_message_uuid)throw Error("Parent UUID required");let t=a.parent_message_uuid;e.messageByUuid.set(a.uuid,a),e.parentByChildUuid.set(a.uuid,t);let r=null!=(n=e.childrenByParentUuid.get(t))?n:[];r.push(a.uuid),e.childrenByParentUuid.set(t,r),e.selectedChildByUuid.set(t,r.length-1)}return c(e,t[t.length-1].uuid)},g=(e,t)=>{let n=[],a=null!=t?t:o;for(;e.childrenByParentUuid.has(a);){let t=d(e.childrenByParentUuid,a);if(0===t.length)break;let r=d(e.selectedChildByUuid,a),s=d(e.messageByUuid,t[r]);n.push({...s,parent_message_uuid:a,nOptions:t.length,selectedOption:r}),a=s.uuid}return n};function v(e,t,n){var a;let r=d(e.parentByChildUuid,t.uuid),i=d(e.childrenByParentUuid,r),l=s()((null!=(a=t.selectedOption)?a:0)+n,0,i.length-1);e.selectedChildByUuid.set(r,l);let o=g(e,r);return c(e,o[o.length-1].uuid)}},62798:(e,t,n)=>{"use strict";n.d(t,{s:()=>o});var a=n(54568),r=n(68864),s=n(7620),i=n(12072);let l={timeZoneName:"short",...r.c9.DATETIME_MED},o=(0,s.memo)(e=>{let{datetime:t,locale:n}=e;return(0,a.jsx)(i.m,{delayDuration:700,side:"bottom",tooltipContent:t.toLocaleString(l),children:(0,a.jsx)("span",{children:t.toRelative({locale:n})})})});o.displayName="RelativeTime"},63246:(e,t,n)=>{"use strict";n.d(t,{Ah:()=>i,Bs:()=>r,NJ:()=>s,VH:()=>a,Xs:()=>o,u5:()=>l});let a=e=>{let{account:t,isClaudeDot:n}=e;return n?!1===t.settings.has_finished_claudeai_onboarding:!t.full_name||!t.display_name},r=(e,t)=>t&&!e.is_verified,s=(e,t)=>!!function(e,t){for(let n of e.invites)if(n.organization.capabilities&&n.organization.capabilities.includes(t))return n}(e,t?"raven":"api"),i=(e,t)=>!t&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n&&t&&!e.age_is_verified},o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a({account:e,isClaudeDot:t})||r(e,t)||s(e,t)||i(e,t)||l(e,t,n)}},74189:(e,t,n)=>{"use strict";n.d(t,{m:()=>d});var a=n(54568),r=n(9537),s=n(65400),i=n(20591),l=n.n(i),o=n(62942),u=n(7620);let d=e=>{var t;let{placeholder:n}=e,i=(0,u.useRef)(null),d=(0,o.useSearchParams)(),c=(0,u.useMemo)(()=>l()(e=>{let t=new URLSearchParams(d);t.set("search",e),window.history.replaceState(null,"","?".concat(t.toString()))},300),[d]);return(0,u.useEffect)(()=>(i.current&&i.current.focus(),()=>{c.cancel()}),[c]),(0,u.useEffect)(()=>{let e=e=>{var t,n,a,r;"/"===e.key&&(null==(t=document.activeElement)?void 0:t.tagName)!=="INPUT"&&(null==(n=document.activeElement)?void 0:n.tagName)!=="TEXTAREA"&&(e.preventDefault(),null==(a=i.current)||a.focus()),"Escape"===e.key&&(null==(r=i.current)||r.blur())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,a.jsx)(r.ks,{ref:i,className:"w-full",size:"lg",defaultValue:null!=(t=d.get("search"))?t:"",placeholder:n,prepend:(0,a.jsx)(s.e,{size:16}),onChange:e=>{c(e.target.value)}})}},75632:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});let a=()=>void 0===crypto.randomUUID?"".concat(1e7,"-",1e3,"-",4e3,"-",8e3,"-",1e11).replace(/[018]/g,e=>{let t=parseInt(e);return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}):crypto.randomUUID()},80731:(e,t,n)=>{"use strict";n.d(t,{K:()=>l,p:()=>o});var a=n(1761),r=n(55554),s=n(85544),i=n(21036);let l=()=>{let e=(0,a.O9)(),t=(0,a.zc)(),n=(0,a.mV)(),{selectedTier:l,shouldOverrideFeatureAccess:o,isTierSelectorEnabled:u}=(0,r.t)(),d=(0,i.useDynamicConfig)("claude_ai_projects_limits").get("max_free_projects",0)>0,c=u&&o&&l?l===s.d7.PRO||l===s.d7.MAX||l===s.d7.ENTERPRISE:e||t||n,m=(0,i.useLayer)("trials_freemium").get("free_project",!1);return d||c||m},o=()=>{let e=(0,a.O9)(),t=(0,a.zc)(),n=(0,a.mV)(),{selectedTier:l,shouldOverrideFeatureAccess:o,isTierSelectorEnabled:u}=(0,r.t)(),d=(0,i.useDynamicConfig)("claude_ai_projects_limits"),c=(0,i.useLayer)("trials_freemium");if(u&&o&&l?l===s.d7.PRO||l===s.d7.MAX||l===s.d7.ENTERPRISE:e||t||n)return;let m=d.get("max_free_projects",0);return m>0?m:+!!c.get("free_project",!1)}},81527:(e,t,n)=>{"use strict";n.d(t,{BN:()=>C,CB:()=>g,GQ:()=>T,Gz:()=>E,Kf:()=>x,LQ:()=>S,PL:()=>h,bL:()=>_,bs:()=>y,dx:()=>m,eW:()=>j,fo:()=>b,gM:()=>p,gr:()=>f,sC:()=>c,sS:()=>w,u7:()=>v});var a=n(7726),r=n(77186),s=n(1761),i=n(29585),l=n(71473),o=n(87606),u=n(7620),d=n(80731);let c=30,m=1e4;var p=function(e){return e.Student="student",e.Beam="beam",e.Meeting="meeting",e}({}),f=function(e){return e.Study="study",e.Career="career",e.Research="research",e.BeamTemplateAskClaudeV1="beam_template_ask_claude_v1",e.BeamTemplatePmV1="beam_template_pm_v1",e.BeamTemplateDsV1="beam_template_ds_v1",e.Zoom="zoom",e.Teams="teams",e.GoogleMeet="google_meet",e}({});let h=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid;return(0,r.Sk)("/api/organizations/".concat(t,"/projects/count"),{queryKey:[l.Wy,{orgUUID:t}],staleTime:3e5,enabled:!!t,meta:{noToast:e=>e instanceof i.LG&&"permission_error"===e.type}})},g=e=>{let{enabled:t=!0,limit:n,offset:a,starred:i,creatorFilter:o,isBeam:u,projectFilter:c,orderBy:m}=e,{activeOrganization:p}=(0,s.YL)(),f=(0,d.K)(),h=null==p?void 0:p.uuid,g=new URLSearchParams;return g.append("include_harmony_projects","true"),void 0!==n&&g.append("limit",n.toString()),void 0!==a&&g.append("offset",a.toString()),void 0!==i&&g.append("starred",i.toString()),void 0!==o&&g.append("creator_filter",o.toString()),void 0!==u&&g.append("is_beam",u.toString()),void 0!==c&&g.append("filter",c.toString()),void 0!==m&&g.append("order_by",m.toString()),(0,r.Sk)("/api/organizations/".concat(h,"/projects?").concat(g.toString()),{queryKey:[l.BP,{orgUuid:h},{limit:n,offset:a,starred:i,creatorFilter:o,projectFilter:c,isBeam:u,orderBy:m}],enabled:!!(t&&p&&f),select:e=>{let t=e.length===n;return Object.assign(e.filter(e=>!e.archived_at),{hasMore:t})}})},v=e=>{let{enabled:t=!0,limit:n=c,offset:a=0,starred:i,creatorFilter:o,isBeam:u,projectFilter:m,orderBy:p,searchQuery:f}=e,{activeOrganization:h}=(0,s.YL)(),g=(0,d.K)(),v=null==h?void 0:h.uuid,x=new URLSearchParams;return x.append("limit",n.toString()),x.append("offset",a.toString()),void 0!==i&&x.append("starred",i.toString()),void 0!==o&&x.append("creator_filter",o.toString()),void 0!==u&&x.append("is_beam",u.toString()),void 0!==m&&x.append("filter",m.toString()),void 0!==p&&x.append("order_by",p.toString()),void 0!==f&&x.append("searchQuery",f.toString()),(0,r.Sk)("/api/organizations/".concat(v,"/projects_v2?").concat(x.toString()),{queryKey:[l.Wf,{orgUuid:v},{limit:n,offset:a,starred:i,creatorFilter:o,projectFilter:m,isBeam:u,orderBy:p,searchQuery:f}],enabled:!!(t&&h&&g)})},x=()=>{let{activeOrganization:e}=(0,s.YL)(),t=(0,r.mn)();return(0,u.useCallback)(async()=>(await t("/api/organizations/".concat(null==e?void 0:e.uuid,"/projects"))).json(),[null==e?void 0:e.uuid,t])},y=()=>{let e=x(),t=(0,a.uE)();return(0,u.useCallback)(async()=>{let[n,r]=await Promise.all([e(),t({limit:a.dy})]);return((e,t)=>{let n=e.map(e=>({...e,lastConversation:null==t?void 0:t.find(t=>t.project_uuid===e.uuid)})).filter(e=>e.lastConversation).sort((e,t)=>new Date(t.lastConversation.created_at).getTime()-new Date(e.lastConversation.created_at).getTime()),a=null==e?void 0:e.filter(e=>!n.find(t=>t.uuid===e.uuid));return[...n,...a]})(n,r)},[t,e])},b=e=>{let{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid;return(0,r.Sk)("/api/organizations/".concat(n,"/projects/").concat(e),{queryKey:[l.hc,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e),staleTime:0,meta:{noToast:e=>e instanceof i.LG&&(404===e.statusCode||403===e.statusCode)}})},_=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid,n=(0,o.useQueryClient)();return(0,r.L2)(()=>"/api/organizations/".concat(t,"/projects"),"POST",{onSuccess:()=>{n.invalidateQueries({queryKey:[l.BP,{orgUuid:t}]})}})},w=e=>{let{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid,a=E();return(0,r.Qv)(()=>"/api/organizations/".concat(n,"/projects/").concat(e),"PUT",(e,t)=>t?{...t,...e}:void 0,{onSuccess:()=>{a(e)},queryKey:[l.hc,{orgUuid:n,projectUuid:e}]})},j=e=>{let{activeOrganization:t}=(0,s.YL)(),n=null==t?void 0:t.uuid,a=E();return(0,r.L2)(()=>"/api/organizations/".concat(n,"/projects/").concat(e),"DELETE",{onSuccess:()=>{a(e)}})},S=function(e){let{limit:t=30,offset:n=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:a}=(0,s.YL)(),o=null==a?void 0:a.uuid,u=new URLSearchParams;return u.append("limit",t.toString()),u.append("offset",n.toString()),(0,r.Sk)("/api/organizations/".concat(o,"/projects/").concat(e,"/conversations_v2?").concat(u.toString()),{queryKey:[l.yF,{orgUuid:o,projectUuid:e,limit:t,offset:n}],enabled:!!a,staleTime:0,meta:{noToast:e=>e instanceof i.LG&&403===e.statusCode}})},C=()=>{var e,t;let n=g({enabled:!0,creatorFilter:"is_creator",limit:m}),a=null==(t=n.data)||null==(e=t.find(e=>e.is_starter_project))?void 0:e.uuid;return{...n,data:a}},E=()=>{let{activeOrganization:e}=(0,s.YL)(),t=null==e?void 0:e.uuid,n=(0,o.useQueryClient)();return e=>{n.invalidateQueries({queryKey:[l.hc,{orgUuid:t,projectUuid:e}]}),n.invalidateQueries({queryKey:[l.BP,{orgUuid:t}]}),n.invalidateQueries({queryKey:[l.yF,{orgUuid:t,projectUuid:e}]})}},T=(e,t)=>{let n=E();return(0,r.L2)("/api/organizations/".concat(e,"/projects/").concat(t,"/report"),"POST",{enabled:!!t&&!!e,onSuccess:()=>{n(t)}})}},89674:(e,t,n)=>{"use strict";n.d(t,{j:()=>i,y:()=>s});var a=n(96712),r=n(7620);let s=e=>{let{shouldFocus:t,target:n,delayMs:a=100}=e;(0,r.useEffect)(()=>{if(t&&n){let e=setTimeout(()=>{var e;null==(e=n.current)||e.focus()},a);return()=>clearTimeout(e)}},[t,n,a])},i=(e,t)=>{let n=(0,a.l)(),s=n.get(e),[i,l]=(0,r.useState)(void 0!==s?"true"===s:t);return[i,(0,r.useCallback)(t=>{l(a=>{let r="function"==typeof t?t(a):t;return n.set(e,r.toString()),r})},[n,e])]}},91961:(e,t,n)=>{"use strict";n.d(t,{Fr:()=>r,K7:()=>m,Nj:()=>p,cX:()=>i,fJ:()=>c,lh:()=>f,uF:()=>u,vm:()=>l});var a=n(7620);function r(){return window.innerWidth<640}let s=/(macintosh|macintel|macppc|mac68k|macos)/i;function i(){let e=window.navigator.userAgent.toLowerCase();return s.test(e)}function l(){return(0,a.useMemo)(()=>/(macintosh|macintel|macppc|mac68k|macos)/i.test(window.navigator.userAgent),[])}let o=/(win32|win64|windows|wince)/i;function u(){let e=window.navigator.userAgent.toLowerCase();return o.test(e)}let d=/(iphone|ipad|ipod|android|mobile|webos)/i;function c(){let e=window.navigator.userAgent.toLowerCase();return d.test(e)}function m(e){(0,a.useEffect)(()=>{let t=document.title;return e&&(document.title="".concat(e," - Claude")),()=>{document.title=t}},[e])}let p=e=>{try{return new URL(e).hostname.split(".").slice(-2).join(".")}catch(e){return}},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=[16,32,48,64,96,128].find(e=>e>=2*t)||128,a=p(e);if(a)return"https://www.google.com/s2/favicons?domain=".concat(a,"&sz=").concat(n)}}},e=>{e.O(0,[2971,7261,2846,5006,1036,1575,9474,125,7773,4974,7463,8571,1404,1841,6631,2814,3103,8864,1408,5934,1761,8518,8885,1667,2504,5313,587,4490,7358],()=>e(e.s=3118)),_N_E=e.O()}]);